<section class="tab-content" id="tab-plexus">
    <!-- Force CSS loading directly -->
    <link rel="stylesheet" href="/css/modules/_plexus.css">

    <header class="content-header plexus-main-header">
        <h1>Plexus</h1>
        <p class="subtitle">Recherche intelligente avec sources vérifiées en temps réel</p>
    </header>

    <style>
        /* Hide main header when search is centered */
        #tab-plexus .plexus-main-header {
            display: none;
        }
    </style>

    <div class="plexus-container">
        <!-- Search Input Area -->
        <div class="plexus-search-wrapper" id="plexusSearchWrapper">
            <div class="plexus-logo-container" id="plexusLogoContainer">
                <div class="plexus-logo">
                    <i data-lucide="brain" class="plexus-brain-icon"></i>
                    <span class="plexus-logo-text">Plexus</span>
                </div>
                <p class="plexus-tagline">Explorez le web avec l'intelligence artificielle</p>

                <div class="plexus-mode-toggle">
                    <label class="switch-container">
                        <input type="checkbox" id="plexusDeepResearch">
                        <span class="switch-slider"></span>
                        <span class="switch-label">
                            <i data-lucide="scan-search" style="width: 14px; height: 14px;"></i>
                            Deep Research
                        </span>
                    </label>
                </div>
            </div>

            <style>
                /* Deep Research Toggle */
                .plexus-mode-toggle {
                    margin-top: 16px;
                    display: flex;
                    justify-content: center;
                }

                .switch-container {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    cursor: pointer;
                    padding: 6px 12px;
                    background: var(--bg-element);
                    border: 1px solid var(--border);
                    border-radius: 20px;
                    transition: all 0.2s ease;
                }

                .switch-container:hover {
                    border-color: var(--text-muted);
                }

                .switch-container input {
                    display: none;
                }

                .switch-slider {
                    width: 32px;
                    height: 18px;
                    background-color: var(--border-strong);
                    border-radius: 20px;
                    position: relative;
                    transition: background-color 0.3s;
                }

                .switch-slider::before {
                    content: "";
                    position: absolute;
                    width: 14px;
                    height: 14px;
                    left: 2px;
                    bottom: 2px;
                    background-color: white;
                    border-radius: 50%;
                    transition: transform 0.3s;
                }

                .switch-container input:checked+.switch-slider {
                    background-color: var(--accent);
                }

                .switch-container input:checked+.switch-slider::before {
                    transform: translateX(14px);
                }

                .switch-label {
                    font-size: 12px;
                    font-weight: 600;
                    color: var(--text-secondary);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }
            </style>

            <div class="plexus-search-box">
                <form id="plexusForm">
                    <div class="plexus-input-wrapper">
                        <i data-lucide="search" class="plexus-search-icon"></i>
                        <textarea id="plexusInput" placeholder="Posez votre question..." rows="1"></textarea>
                        <button type="submit" class="plexus-send-btn" id="plexusSendBtn">
                            <i data-lucide="arrow-right"></i>
                        </button>
                    </div>
                </form>

                <div class="plexus-suggestions" id="plexusSuggestions">
                    <button class="plexus-suggestion" data-query="Quelles sont les dernières actualités tech ?">
                        <i data-lucide="newspaper"></i>
                        <span>Actualités tech</span>
                    </button>
                    <button class="plexus-suggestion" data-query="Explique-moi la cryptographie quantique">
                        <i data-lucide="atom"></i>
                        <span>Science & Tech</span>
                    </button>
                    <button class="plexus-suggestion" data-query="Résume les dernières découvertes en IA">
                        <i data-lucide="sparkles"></i>
                        <span>Intelligence Artificielle</span>
                    </button>
                    <button class="plexus-suggestion" data-query="Quel est le cours du Bitcoin aujourd'hui ?">
                        <i data-lucide="coins"></i>
                        <span>Finance & Crypto</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Area -->
        <div class="plexus-results-area hidden" id="plexusResultsArea">
            <div class="plexus-query-display">
                <button class="plexus-back-btn" id="plexusBackBtn" title="Nouvelle recherche">
                    <i data-lucide="arrow-left"></i>
                </button>
                <div class="plexus-current-query" id="plexusCurrentQuery"></div>
            </div>

            <div class="plexus-results-layout">
                <!-- Main Answer -->
                <div class="plexus-answer-panel">
                    <div class="plexus-thinking hidden" id="plexusThinking">
                        <div class="plexus-thinking-header">
                            <i data-lucide="brain"></i>
                            <span>Analyse en cours</span>
                        </div>
                        <div class="plexus-thinking-steps" id="plexusThinkingSteps">
                            <div class="thinking-step active">
                                <i data-lucide="search"></i>
                                <span>Recherche sur le web...</span>
                            </div>
                        </div>
                    </div>

                    <div class="plexus-answer" id="plexusAnswer">
                        <!-- Answer will be rendered here -->
                    </div>

                    <div class="plexus-followup hidden" id="plexusFollowup">
                        <h4>Questions liées</h4>
                        <div class="plexus-followup-list" id="plexusFollowupList">
                            <!-- Related questions will be added here -->
                        </div>
                    </div>
                </div>

                <!-- Sources Panel -->
                <aside class="plexus-sources-panel">
                    <h3 class="plexus-sources-title">
                        <i data-lucide="globe"></i>
                        Sources
                    </h3>
                    <div class="plexus-sources-list" id="plexusSourcesList">
                        <!-- Sources will be listed here -->
                    </div>
                </aside>
            </div>
        </div>
    </div>
</section>