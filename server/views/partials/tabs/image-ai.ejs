<section class="tab-content" id="tab-image-ai">
    <header class="content-header">
        <div class="header-with-status">
            <h1>Image AI Tools</h1>
            <div class="status-badges">
                <span class="status-badge disconnected" id="imageAiRembgStatus"><i data-lucide="power"
                        class="status-icon"></i> REMBG</span>
                <span class="status-badge disconnected" id="imageAiUpscaleStatus"><i data-lucide="power"
                        class="status-icon"></i> Upscale</span>
            </div>
        </div>
        <p class="subtitle">Supprimez l'arrière-plan ou agrandissez vos images avec l'IA</p>
    </header>

    <div class="converter-container">
        <!-- Tool Selection -->
        <div class="tool-selector">
            <button class="tool-btn active" data-tool="removebg">
                <i data-lucide="scissors"></i>
                <span>Remove Background</span>
            </button>
            <button class="tool-btn" data-tool="upscale">
                <i data-lucide="sparkles"></i>
                <span>Upscale Image</span>
            </button>
        </div>

        <!-- Server Error Messages -->
        <div class="server-error hidden" id="imageAiRembgError">
            <div class="error-icon"><i data-lucide="alert-triangle"></i></div>
            <div class="error-content">
                <h3>Serveur REMBG non connecté</h3>
                <p>Le serveur Python doit être démarré pour utiliser cette fonctionnalité.</p>
                <code>python server/python/rembg_server.py</code>
                <button id="imageAiRembgRetryBtn" class="btn-retry">Réessayer</button>
            </div>
        </div>

        <div class="server-error hidden" id="imageAiUpscaleError">
            <div class="error-icon"><i data-lucide="alert-triangle"></i></div>
            <div class="error-content">
                <h3>Serveur Upscale non connecté</h3>
                <p>Le serveur Python doit être démarré pour utiliser cette fonctionnalité.</p>
                <code>python server/python/upscale_server.py</code>
                <button id="imageAiUpscaleRetryBtn" class="btn-retry">Réessayer</button>
            </div>
        </div>

        <!-- Remove BG Options -->
        <div class="tool-options" id="imageAiRembgOptions">
            <div class="rembg-model-selector">
                <div class="selector-header">
                    <div class="header-icon"><i data-lucide="layers"></i></div>
                    <div class="header-text">
                        <h3>Modèle IA</h3>
                        <p>Choisissez le modèle optimal pour vos images</p>
                    </div>
                </div>
                <div class="model-options">
                    <div class="model-option active" data-model="u2net">
                        <div class="option-header">
                            <span class="model-name">U2NET (Défaut)</span>
                            <div class="model-badges">
                                <span class="badge-perf med">Équilibré</span>
                            </div>
                        </div>
                        <p class="model-desc">Le standard polyvalent pour la plupart des objets et arrière-plans.</p>
                    </div>

                    <div class="model-option" data-model="u2netp">
                        <div class="option-header">
                            <span class="model-name">U2NETP</span>
                            <div class="model-badges">
                                <span class="badge-perf fast">Rapide</span>
                            </div>
                        </div>
                        <p class="model-desc">Version ultra-légère. Idéale pour les petits fichiers ou connexions
                            lentes.</p>
                    </div>

                    <div class="model-option" data-model="u2net_human_seg">
                        <div class="option-header">
                            <span class="model-name">Human Seg</span>
                            <div class="model-badges">
                                <span class="badge-perf med">Portrait</span>
                            </div>
                        </div>
                        <p class="model-desc">Spécialisé pour le détourage de personnes. Idéal pour les selfies.</p>
                    </div>

                    <div class="model-option" data-model="isnet-general-use">
                        <div class="option-header">
                            <span class="model-name">ISNET</span>
                            <div class="model-badges">
                                <span class="badge-perf pro">Précis</span>
                            </div>
                        </div>
                        <p class="model-desc">Haute fidélité pour les images complexes. Nécessite plus de calcul.</p>
                    </div>

                    <div class="model-option" data-model="silueta">
                        <div class="option-header">
                            <span class="model-name">Silueta</span>
                            <div class="model-badges">
                                <span class="badge-perf fast">Contours</span>
                            </div>
                        </div>
                        <p class="model-desc">Optimisé pour des silhouettes nettes et un traitement très rapide.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upscale Options -->
        <div class="tool-options hidden" id="imageAiUpscaleOptions">
            <div class="option-row">
                <label class="model-label">Modèle d'IA</label>
                <div class="toggle-group model-toggle">
                    <button class="toggle-btn active" data-model="edsr">EDSR (Précis)</button>
                    <button class="toggle-btn" data-model="msrn">MSRN (Détails)</button>
                    <button class="toggle-btn" data-model="pan">PAN (Rapide)</button>
                </div>
            </div>
            <div class="option-row" style="margin-top: 16px;">
                <label class="model-label">Facteur d'agrandissement</label>
                <div class="toggle-group scale-toggle">
                    <button class="toggle-btn" data-scale="2">x2</button>
                    <button class="toggle-btn" data-scale="3">x3</button>
                    <button class="toggle-btn active" data-scale="4">x4</button>
                </div>
            </div>
            <div class="option-row" style="margin-top: 16px;">
                <label class="model-label">Débruitage</label>
                <div class="toggle-group denoise-toggle">
                    <button class="toggle-btn active" data-denoise="false">OFF</button>
                    <button class="toggle-btn" data-denoise="true">ON</button>
                </div>
            </div>
        </div>

        <!-- Drop Zone -->
        <div class="drop-zone" id="imageAiDropZone">
            <div class="drop-zone-content">
                <div class="drop-icon"><i data-lucide="image"></i></div>
                <p class="drop-text">Glissez vos images ici</p>
                <p class="drop-subtext">PNG, JPG, WEBP, BMP • Max 10MB par fichier</p>
                <input type="file" id="imageAiFileInput"
                    accept="image/png,image/jpeg,image/jpg,image/webp,image/gif,image/bmp" hidden multiple>
            </div>
        </div>

        <!-- File List -->
        <div class="rembg-file-list hidden" id="imageAiFileList">
            <!-- Files will be added here dynamically -->
        </div>

        <!-- Process Button -->
        <button class="btn-convert hidden" id="imageAiProcessBtn" style="margin-top: 32px;">
            <span class="btn-text"><i data-lucide="sparkles" class="inline-icon"></i> <span
                    id="imageAiProcessText">Traiter les images</span></span>
            <span class="btn-loader hidden"></span>
        </button>

        <!-- Progress -->
        <div class="progress-container hidden" id="imageAiProgressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="imageAiProgressFill"></div>
            </div>
            <p class="progress-text" id="imageAiProgressText">Traitement en cours...</p>
        </div>

        <!-- Result -->
        <div class="rembg-result hidden" id="imageAiResultContainer">
            <!-- Results will be added here dynamically -->
        </div>
    </div>
</section>