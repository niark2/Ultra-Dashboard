<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>

<% if (isProd) { %>
    <!-- Production: Single bundled & minified JS -->
    <script type="module" src="dist/bundle.min.js"></script>
    <% } else { %>
        <!-- Development: Separate JS modules for debugging -->
        <script type="module" src="js/app.js"></script>
        <% } %>

            <script>
                // Handle direct tab access via URL hash (e.g., #localdrop)
                window.addEventListener('load', () => {
                    const hash = window.location.hash.replace('#', '');
                    if (hash) {
                        const checkTabs = setInterval(() => {
                            const btn = document.querySelector(`.nav-item[data-tab="${hash}"]`);
                            if (btn) {
                                btn.click();
                                clearInterval(checkTabs);
                                // Hide sidebar on mobile if directly accessing localdrop
                                if (window.innerWidth < 768 && hash === 'localdrop') {
                                    document.body.classList.add('compact-sidebar');
                                }
                            }
                        }, 100);
                        setTimeout(() => clearInterval(checkTabs), 2000);
                    }
                });
            </script>